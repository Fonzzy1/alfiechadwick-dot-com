<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alfie Chadwick and Libby Lester, Monash University">
<meta name="dcterms.date" content="2025-04-23">

<title>In the Conversation: These 3 climate misinformation campaigns are operating during the election run-up. Here’s how to spot them – Alfie Chadwick</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-7cf04a3b623d4438a22436c885baf8e8.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-c466080e74199f7e5684a91bcf2645e7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Alfie Chadwick</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../pages/posts/postList.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../pages/tags/tagList.html"> 
<span class="menu-text">Tags</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../pages/reviews/reviews.html"> 
<span class="menu-text">Reviews</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">In the Conversation: These 3 climate misinformation campaigns are operating during the election run-up. Here’s how to spot them</h1>
</div>



<div class="quarto-title-meta column-page">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><span><a href="https://theconversation.com/profiles/alfie-chadwick-2359192">Alfie Chadwick</a> and <a href="https://theconversation.com/profiles/libby-lester-16399">Libby Lester</a>, <em><a href="https://theconversation.com/institutions/monash-university-1065">Monash University</a></em></span> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 23, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="theconversation-article-body">
<p>
Australia’s climate and energy wars are at the forefront of the federal election campaign as the major parties outline vastly different plans to reduce greenhouse gas emissions and tackle soaring power prices.
</p>
<p>
Meanwhile, misinformation about climate change has permeated public debate during the campaign, feeding false and misleading claims about renewable energy, gas and global warming.
</p>
<p>
This is a dangerous situation. In Australia and globally, rampant misinformation has for decades slowed climate action – creating doubt, hindering decision-making and undermining public support for solutions.
</p>
<p>
Here, we explain the history of climate misinformation in Australia and identify three prominent campaigns operating now. We also outline how Australians can protect themselves from misinformation as they head to the polls.
</p>
<h2 class="anchored">
Misinformation vs disinformation
</h2>
<p>
Misinformation is defined as false information spread unintentionally. It is distinct from disinformation, which is deliberately created to mislead.
</p>
<p>
However, proving intent to mislead can be challenging. So, the term misinformation is often used as a general term to describe misleading content, while the term disinformation is reserved for cases where intent is proven.
</p>
<p>
Disinformation is typically part of a <a href="https://www.theguardian.com/environment/2025/jan/22/us-thinktank-climate-science-deniers-working-with-rightwingers-in-eu-parliament-heartland-institute">coordinated campaign</a> to influence public opinion. Such campaigns can be run by corporate interests, political groups, lobbying organisations or individuals.
</p>
<p>
Once released, these false narratives may be picked up by others, who pass them on and create misinformation.
</p>
<h2 class="anchored">
Climate change misinformation in Australia
</h2>
<p>
In the <a href="https://www.researchgate.net/publication/229780553_Fair_Weather_Friend_Ethics_and_Australia%27s_Approach_to_Global_Climate_Change">1980s and 1990s</a>, Australia’s emissions-reduction targets were among the most ambitious in the world.
</p>
<p>
At the time, about 60 companies were responsible for <a href="https://smharchives.smedia.com.au/Olive/APA/smharchive/SharedView.Article.aspx?href=SMH%2F1990%2F10%2F09&amp;id=Ar01500&amp;sk=AC1ED010&amp;viewMode=image">one-third of Australia’s greenhouse gas emissions</a>. The government’s plan <a href="https://www.afr.com/politics/greenhouse-gas-emission-reduction-targeted-at-20pc-19901012-k44js">included measures</a> to ensure these companies remained competitive while reducing their climate impact.
</p>
<p>
Despite this, Australia’s resource industry began a <a href="https://www.sciencedirect.com/science/article/pii/S2214629621001870#b0040">concerted media campaign</a> to oppose any binding emissions-reduction actions, claiming it would ruin the economy by making Australian businesses uncompetitive.
</p>
<p>
This narrative persisted even when <a href="https://www.sciencedirect.com/science/article/pii/S0959378000000649">modelling repeatedly showed</a> climate policies would have minimal economic impacts. The industry arguments eventually <a href="https://allouryesterdays.info/2023/08/13/august-14-2002-australian-economists-urge-kyoto-protocol-ratification/">found their way</a> into <a href="https://www.aph.gov.au/Parliamentary_Business/Committees/Senate/Environment_and_Communications/Completed_inquiries/2002-04/kyoto/report/c04">government policy</a>.
</p>
<p>
Momentum against climate action was also fuelled by a vocal group of <a href="https://www.desmog.com/climate-disinformation-database/#">climate change-denying</a> individuals and organisations, often <a href="https://academic.oup.com/edited-volume/28186/chapter-abstract/213096821?redirectedFrom=fulltext">backed by multinational fossil fuel companies</a>. These deniers <a href="https://www.nature.com/articles/s41598-021-01714-4">variously claimed</a> climate change wasn’t happening, it was caused by natural cycles, or wasn’t that a serious threat.
</p>
<p>
These narratives were further exacerbated by <a href="https://press-files.anu.edu.au/downloads/press/p303951/html/Chapt05.xhtml?referer=&amp;page=10#toc_marker-11">false balance</a> in media coverage, whereby news outlets, in an effort to appear neutral, often placed climate scientists alongside contrarians, giving the impression that the science was still unclear.
</p>
<p>
Together, this created an environment in Australia where climate action was seen as either too economically damaging or simply unnecessary.
</p>
<h2 class="anchored">
What’s happening in the federal election campaign?
</h2>
<p>
Climate misinformation has been circulating in the following forms during this federal election campaign.
</p>
<p>
<strong>1. Trumpet of Patriots</strong>
</p>
<p>
Clive Palmer’s Trumpet of Patriots party ran an <a href="https://www.unitedaustraliaparty.org.au/video/truth-about-climate-change/">advertisement</a> that claimed to expose “ the truth about climate change”. It featured a clip from a 2004 documentary, in which a scientist discusses data suggesting temperatures in Greenland were not rising. The scientist in the clip has <a href="https://www.abc.net.au/news/2025-04-02/clive-palmer-trumpets-of-patriot-misleading-election-ad/105123094">since said</a> his comments are now outdated.
</p>
<p>
The type of misinformation is cherry-picking – presenting one scientific measurement at odds with the overwhelming scientific consensus.
</p>
<p>
<a href="https://www.smh.com.au/business/companies/trumpet-of-patriots-ad-shown-10-million-times-before-google-removal-20250404-p5lp8s.html">Google removed the ad</a> after it was flagged as misleading, but only after it received 1.9 million views.
</p>
<p>
<strong>2. Responsible Future Illawarra</strong>
</p>
<p>
The <a href="https://responsiblefuture.com.au/">Responsible Future</a> campaign opposes wind turbines on <a href="https://www.abc.net.au/news/2025-03-30/illawarra-offshore-wind-farm-misinformation-in-federal-election/105097852">various grounds</a>, including cost, foreign ownership, power prices, effects on views and fishing, and potential ecological damage.
</p>
<p>
Scientific <a href="https://doi.org/10.1121/10.0002453">evidence</a> indicates offshore wind farms are relatively safe for marine life and <a href="https://e360.yale.edu/features/humpback-whale-strandings-u.s.-east-coast">cause less harm than boats and fishing gear</a>. Some studies also suggest the infrastructure can <a href="https://tos.org/oceanography/article/offshore-wind-farm-artificial-reefs-affect-ecosystem-structure-and-functioning-a-synthesis">create new habitat</a> for marine life.
</p>
<p>
However, a general <a href="https://www.abc.net.au/news/2025-03-16/offshore-wind-what-we-do-and-dont-know/103686234">lack of research</a> into offshore wind and marine life has created uncertainty that groups such as Responsible Future Illawarra can exploit.
</p>
<p>
It has cited statements by Sea Shepherd Australia to argue offshore wind farms damage marine life – however Sea Shepherd said its comments <a href="https://www.abc.net.au/news/2025-03-30/illawarra-offshore-wind-farm-misinformation-in-federal-election/105097852">were misrepresented</a>.
</p>
<figure class="figure">
<iframe width="440" height="260" src="https://www.youtube.com/embed/8qxmn4BX1N4?wmode=transparent&amp;start=0" frameborder="0" allowfullscreen="">
</iframe>
</figure>
<p>
<strong>3. Australians for Natural Gas</strong>
</p>
<p>
<a href="https://www.australiansfornaturalgas.com/">Australians for Natural Gas</a> is a pro-gas group set up by the head of a gas company, which presents itself as a grassroots organisation. Its <a href="https://www.facebook.com/ads/library/?active_status=active&amp;ad_type=political_and_issue_ads&amp;country=AU&amp;is_targeted_country=false&amp;media_type=all&amp;search_type=page&amp;view_all_page_id=446419001898079%7E">advertising campaign</a> promotes natural gas as a necessary part of Australia’s fuel mix, and stresses its contribution to jobs and the economy.
</p>
<p>
The ad campaign implicitly suggests climate action – in this case, a shift to renewable energy – is harmful to the economy, livelihoods and energy security. According to <a href="https://www.facebook.com/ads/library/?active_status=active&amp;ad_type=political_and_issue_ads&amp;country=AU&amp;is_targeted_country=false&amp;media_type=all&amp;search_type=page&amp;view_all_page_id=446419001898079">Meta’s Ad Library</a>, these adds have already been seen more than 1.1 million times.
</p>
<p>
Gas <em>is</em> needed in Australia’s current energy mix. But analysis shows it could be phased out almost entirely if renewable energy and storage was <a href="https://www.sciencedirect.com/science/article/pii/S2352152X24022874?utm_source=chatgpt.com">sufficiently increased</a> and business and home electrification <a href="https://grattan.edu.au/report/getting-off-gas/">continues to rise</a>.
</p>
<p>
And of course, failing to tackle climate change will <a href="https://www.climatecouncil.org.au/wp-content/uploads/2019/05/Costs-of-climate-change-report.pdf">cause substantial harm</a> across Australia’s economy.
</p>
<h2 class="anchored">
How to identify misinformation
</h2>
<p>
As the federal election approaches, climate misinformation and disinformation is likely to proliferate further. So how do we distinguish fact from fiction?
</p>
<p>
One way is through “<a href="https://www.uts.edu.au/news/2024/02/how-inoculate-against-climate-misinformation-prebunk-it">pre-bunking</a>” – familiarising yourself with common claims made by climate change deniers to <a href="https://research-information.bris.ac.uk/ws/portalfiles/portal/263813879/FINAL_Revision_ERSP_inoc_paper_4SvdL.pdf">fortify yourself against misinformation</a>
</p>
<p>
Sources such as <a href="https://skepticalscience.com/">Skeptical Science</a> offer in-depth analyses of specific claims.
</p>
<p>
The <a href="https://guides.lib.uchicago.edu/c.php?g=1241077&amp;p=9082322">SIFT method</a> is another valuable tool. It comprises four steps:
</p>
<ul>
<li>
<strong>S</strong>top
</li>
<li>
<strong>I</strong>nvestigate the source
</li>
<li>
<strong>F</strong>ind better coverage
</li>
<li>
<strong>T</strong>race claims, quotes and media to their original sources.
</li>
</ul>
<p>
As the threat of climate change grows, a flow of accurate information is vital to garnering public and political support for vital policy change.<!-- Below is The Conversation's page counter tag. Please DO NOT REMOVE. --><img src="https://counter.theconversation.com/content/253441/count.gif?distributor=republish-lightbox-basic" alt="The Conversation" width="1" height="1" style="border: none !important; box-shadow: none !important; margin: 0 !important; max-height: 1px !important; max-width: 1px !important; min-height: 1px !important; min-width: 1px !important; opacity: 0 !important; outline: none !important; padding: 0 !important" referrerpolicy="no-referrer-when-downgrade"><!-- End of code. If you don't see any code above, please get new code from the Advanced tab after you click the republish button. The page counter does not collect any personal data. More info: https://theconversation.com/republishing-guidelines -->
</p>
<p>
<span><a href="https://theconversation.com/profiles/alfie-chadwick-2359192">Alfie Chadwick</a>, PhD Candidate, Monash Climate Change Communication Research Hub, <em><a href="https://theconversation.com/institutions/monash-university-1065">Monash University</a></em> and <a href="https://theconversation.com/profiles/libby-lester-16399">Libby Lester</a>, Professor (Research) and Director, Monash Climate Change Communication Hub, <em><a href="https://theconversation.com/institutions/monash-university-1065">Monash University</a></em></span>
</p>
<p>
This article is republished from <a href="https://theconversation.com">The Conversation</a> under a Creative Commons license. Read the <a href="https://theconversation.com/these-3-climate-misinformation-campaigns-are-operating-during-the-election-run-up-heres-how-to-spot-them-253441">original article</a>.
</p>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>